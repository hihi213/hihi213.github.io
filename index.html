<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>달나라로 간 우왕좌왕</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Diphylleia&display=swap');

        @import url('https://fonts.googleapis.com/css2?family=Black+And+White+Picture&family=Dokdo&display=swap');

        @keyframes shake {
            0% {
                transform: translateX(0vw);
            }

            25% {
                transform: translateX(0.5vw);
            }

            50% {
                transform: translateX(0vw);
            }

            75% {
                transform: translateX(-0.5vw);
            }

            100% {
                transform: translateX(0);
            }
        }

        @keyframes shake2 {
            0% {
                transform: translateY(0vh);
            }

            25% {
                transform: translateY(0.5vh);
            }

            50% {
                transform: translateY(0vh);
            }

            75% {
                transform: translateY(-0.5vh);
            }

            100% {
                transform: translateY(0);
            }
        }

        .highlight {
            color: #730000;
            animation: shake 1s linear infinite;
            position: relative;
            display: inline-block;
            font-size: larger;
            font-family: "Black And White Picture", system-ui;
        }

        .foxsay {
            color: #eb8e03;
            animation: shake2 1s linear infinite;
            position: relative;
            display: inline-block;
            font-size: larger;

        }

        .lowlight {
            color: #54594780;
            animation: shake 2s linear infinite;
            position: relative;
            display: inline-block;
        }

        /* 공통 스타일 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Diphylleia', serif;
            text-align: center;
            font-weight: 700;

        }


        #text-container {
            width: 100%;
            margin: auto;

        }

        /* 모바일 및 데스크탑 공통 스타일 */
        body,
        header,
        section {
            width: 100%;
            overflow: hidden;
            word-break: keep-all;
            /*단어단위로 줄바꿈*/
        }

        #pic {
            object-fit: cover;
            height: 100%;
            max-width: 100%;
            overflow: hidden;
        }


        /* 모바일 스타일 */
        @media (max-width: 768px) {
            body {
                background: url('pic/background.jpeg') no-repeat center/100% 100%;
                height: 90vh;
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 5vh;
            }

            header {
                height: 35%;
                overflow: hidden;
            }

            section {
                height: 17%;
            }

            #text-container {
                padding-top: 3vh;
                height: 50%;
                font-size: larger;
            }

            #choice1,
            #choice2 {
                padding: 3%;
                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.532);
                height: 40%;
                font-size: 5vw
            }
        }

        /* 데스크탑 스타일 */
        @media (min-width: 769px) {
            body {
                background: url('pic/background.jpeg') no-repeat center/70% 100%;
                height: 100vh;
                width: 70vw;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 5vh 5vw;
                margin: auto;
                font-size: 3vw;
            }

            header {
                overflow: hidden;
            }

            section {
                height: 17%;
            }

            #text-container {
                height: 60%;
                padding-top: 3vh;
            }

            #choice1,
            #choice2 {
                padding: 1%;
                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.532);
                height: 50%;
                font-weight: 900;
            }
        }

        .utterances {
            display: none;
        }
    </style>
</head>

<body>
    <header>
        <img id="pic" src="pic/house.jpeg" alt="">
    </header>
    <div id="text-container">
        어서오세요.
    </div>
    <section>
        <span>

            <div id="choice1" class="choice">
                선택지를 클릭해주세요
            </div>
            <div id="choice2" class="choice">
                선택지를 클릭해주세요
            </div>
            <span id="progress-text">0%</span>
        </span>

    </section>
    <footer>
        <script id="comment" src="https://utteranc.es/client.js" repo="hihi213/byebye" issue-term="pathname"
            label="✨💬✨comments" theme="icy-dark" crossorigin="anonymous" async>
            </script>
    </footer>

    <script>

        //1. 사진 삽입
        //2. 하이라이트 클래스를 각자마다 색깔부여해서 할까
        //2. 공통 클래스하나, 세부클래스 하나(색깔) 부여해서 캐릭터마다 다른색으로 말하게 해볼까?
        const fullStory = `[0] moon.webp
        옛날 옛적에, 여우, 굴비, 레몬, 그리고 감자는 모두 같은 꿈을 꾸고 있었습니다. 
        그들의 꿈은 바로 달에 가는 것이었어요. 
        
        하지만 달에 가는 길은 쉽지 않았습니다. 
        사람들은 누구나 노력하면 달에 갈 수 있다고 말했지만, 
        그 길은 너무 멀고 험난해 보였죠.
        
        [1] moon4.jpg
        그 어느 날, 
        성격도 다르고 사는 곳도 다른 네 친구가 우연히 만났어요. 
        비록 서로 다른 길을 걸어왔지만, 각자 다른 점들과, 강점들을 존중하고 알아가며 배워 나갔어요.
        
        그 만남은 그들의 삶을 바꾸어 놓았죠. 
        ..
        (아마도) 
        
        [2] study4.webp 
        “레몬, 이 엔진을 이렇게 바꾸면 더 빠를 수 있을까?” 굴비가 묻자, 
        레몬은 잠시 생각한 후 대답했습니다. 
        “응 그런데, 이 부분이 왜 맞물리지 않을까?” 
        굴비는 지그시 눈을 감으며 말했어요. “아주 좋은 질문이야, 레몬.” 
        
        두 친구는 서로의 아이디어를 교환하며, 로켓의 동작 원리와 내부 구조를 분석하는 연구를 진행했어요. 
        여우와 감자는 그 과정을 옆에서 지켜보며 배워 나갔습니다.
        
        [3] theymet.webp
        그들은 그렇게 꽤 오랜 시간 동안 함께했어요
        
        [4] situ.webp
        ‘누군가’로부터 비롯된 많은 역경을 거치고 서로 우왕좌왕하는 순간도 있었지만, 
        그 과정 속에서 네 친구는 더욱 성장했습니다 
        
        [5] moon.webp
        하지만 우왕좌왕은 로켓에 대한 지식을 쌓는 과정까지 함께할 수 있었어요. 
        로켓은 1인승이여야 한다는 일종의 제약이 있었기 때문이죠.
        
        각자 자신만의 방식으로 로켓을 설계하고 완성해야 했고, 
        그렇게 자신을 증명해야 하는 길을 이젠 홀로 떠나야 했습니다. 

        [6] moon4.jpg
        혼자서 로켓을 만드는 일은 생각보다 외롭고 힘들었어요. 
        시간은 계속 흘렀지만, 작업은 더디기만 했죠. 
        
        그 와중에도 다른 사람들이 벌써 달에 도착했다는 소식이 들려왔습니다. 
        달에 도착한 사람들은 마치 아무 문제 없이 그곳에 간 것처럼 보였어요.
        
        “내가 정말 달에 갈 수 있을까? 로켓을 완성하는 것도 이렇게 힘든데…”
        이에 자신들도 과연 달에 도착할 수 있을지 친구들은 점점 초조해졌죠. 
        하지만 우왕좌왕은 포기하지 않고, 각자 자신만의 길을 끝까지 걸어나갔습니다..
        
        [7] fish.webp
        굴비는 끈기 있고 탐구심이 많았어요. 
        책을 여러 번 읽으며 이해하듯, 로켓 설계서를 반복해서 읽으며 
        로켓의 속도와 추진력을 극대화할 방법을 끝없이 고민했습니다.
        
        "오늘도... 지혜를 주세여 자바신님” 
        그렇게 그는 연료와 엔진을 최적화해 빠르게 달에 도착할 로켓을 완성해나갔어요. 
        
        [8] lemon.webp
        레몬은 언제나 작은 것에도 호기심이 많고, 
        모든 걸 철저하게 분석하는 성격이었어요. 
        로켓장치를 하나 하나 분석하고, 
        그 과정에서 새로운 아이디어를 적용하며 로켓을 만들어 나갔습니다. 
        
        그리고 달까지의 여행에서 피곤하지 않도록 내부에 집처럼 쿠션과 편의시설을 추가하고, 
        생명 유지 장치도 잊지 않았어요. 
        집순이인 레몬답게 말이에요
        
        [9] fox3.webp
        여우는 섬세하고 계획적인 성격 덕분에, 
        복잡한 기계 설계와 로켓의 정밀한 동작에 특히 신경을 썼습니다. 
        큰 틀만 고려하는 것이 아니라, 
        로켓의 작은 부품 하나하나까지 신중하게 설계했습니다. 
        
        “최대한 많이 기록하는 게 중요해, 
        그래야 실수를 반복하지 않아” 
        여우는 실패들을 기록하며 천천히 로켓을 완성해나갔어요.
        [10] potato.webp
        그 시각 감자는 학교에 갇혀 작은 게임을 만들며 시간을 보냈다고 합니다
        
        [11] fish.webp
        그러던 중 드디어 굴비가 로켓을 먼저 완성했어요. 
        굴비는 연료와 엔진을 최적화했기 때문에 빠르게 달에 도착할 수 있으리라 믿었어요. 
        하지만….
        [12] fishfail1.webp
        하지만 첫 번째 시도에, 
        로켓은 너무 과열되어 하늘로 제대로 날아오르지 못하고 폭발하고 말았습니다.
        [13] fish.webp
        굴비는 큰 실망을 했지만, 
        포기하지 않았습니다. 
        굴비는 로켓 설계서를 수정하고, 로켓에 추가적인 부품을 넣었습니다.
        
        “열을 견딜 튼튼한 연료 탱크랑 냉각 장치들, 
        이번엔 누구보다 빠르게 달에 도착할 수 있을 거야!” 
        굴비는 자신만만하게 발사 버튼을 눌렀습니다.
        
        [14] fishfail2.webp
        하지만 로켓은 꿈쩍도 하지 않았습니다. 
        너무 많은 부품을 넣은 나머지, 
        로켓이 너무 무거워져서 하늘로 올라갈 수 없었던 것입니다. 
        [15] fish.webp
        “부품이 많다고 해서 좋은 게 아니었군. 
        가볍고 필요한 것만 남겨야겠어.” 
        굴비는 로켓에서 가장 중요한 부품들만 남겨두고, 
        더 가벼운 연료 탱크를 사용했습니다.. 
        
        "불필요한 부품들을 제거한 두번째 로켓. 
        내가 할 수 있는건 다했어. 
        이젠 자바신한테 빌면 돼 " 
        굴비는 깊은 숨을 내쉬며 발사 버튼을 눌렀습니다. 
        
        [16] rocketsuccess.webp
        그러자 로켓이 
        가볍고도 힘차게 하늘을 향해 솟아올랐습니다! 
        굴비는 창문 밖으로 점점 작아지는 지구를 바라보며 미소를 지었죠.
        [17] fishmoon.png
        로켓은 하늘을 가르며 빠르게 우주로 향했습니다. 
        구름을 뚫고, 별들 사이를 지나 달을 향해 달려갔죠. 
        굴비는 금세 달에 도착했고, 
        두 발로 달 표면을 디디는 순간 외쳤습니다. 
        “드디어 해냈어! 내가 달에 도착했어!”
        
        달에서 굴비는 자원을 발견하는 탐험을 시작했어요. 
        굴비는 지구에 있는 친구들을 위해 새로운 자원들을 모아 보내며 
        다음 친구들이 올 때까지 그들을 기다리기로 했습니다.
        그리곤 달 위에서, 굴비는 달빛을 받으며 자신만의 성취를 조용히 즐겼습니다.
        
        [18] lemon.webp
        한편, 레몬은 모든 것의 원리와 구조를 깊이 탐구하는 성격답게 끊임없이 분석을 반복했습니다.
        
        레몬은 로켓의 작은 부품 하나까지도 철저히 분석하며, 
        어떻게 각 부품이 작동하고 서로 상호작용하는지 이해하고자 했습니다. 
        레몬은 한 번도 대충 넘어가는 법이 없었습니다.
        [19] lemonsad.webp
        그러나 분석에 지나치게 몰두한 나머지, 레몬은 로켓 발사를 계속 미뤘습니다. 
        그리곤 조금이라도 불안한 부분이 있으면 다시 점검하고 또 점검했죠. 
        “에구궁..혹시 뭔가 놓치고 있는 건 아닐까?” 라는 생각이 끊임없이 레몬의 머릿속을 떠나지 않았습니다.
        [21] fishmoon.png
        그때, 달에 먼저 도착한 굴비가 레몬에게 조언을 해주었습니다. 
        “레몬, 일단 발사해봐, 일단 해보는 게 더 중요해. 
        실패해도 괜찮아, 작은 프로젝트부터 시작하면 자신감이 붙을 거야.”
        [22] lemon.webp
        레몬은 굴비의 말을 듣고 깨달음을 얻었습니다. 
        “맞아..
        그리고 하나씩만 발사하는건 너무 시간이 걸린단 말이야...이걸 어떻게 해결하지?” 
        레몬은 잠시 생각에 잠긴 후, 매우 과감한 결정을 내렸습니다.
        [23] lemoncrazy.webp
        “그래! 로켓을 하나씩 발사하는 대신, 
        차라리 50개의 로켓을 한 번에 발사하는 거야! 
        바로.. 
        내 몸에 묶어서!”
        
        레몬은 50개의 작은 로켓을 몸에 묶고, 
        하늘을 향해 날아오를 준비를 했습니다. 
        “실패할 수도 있겠지만, 
        그걸 두려워하지 않을 거야.”
        [24] lemonfly.webp
        발사 버튼을 누르자, 
        수많은 로켓이 동시에 힘차게 불을 뿜으며 하늘로 솟아올랐습니다. 

        그중 몇몇 로켓은 제 역할을 다하지 못하고 떨어졌지만, 
        레몬은 포기하지 않았습니다. “로켓이 끊어져도 괜찮아!  
        끝까지 나를 데려갈 로켓이 반드시 있을 거야!”
        
        로켓들이 하늘로 올라가면서 레몬은 점점 더 달에 가까워졌습니다. 
        결국, 몇 개의 로켓이 성공적으로 작동하며 
        레몬을 달까지 데려가주었죠. 
        [25] lemonmoon.png
        레몬은 달 표면에 발을 내딛으며 기쁘게 외쳤습니다. 
        “드디어 해냈어! 
        여러 시도를 두려워하지 않고 도전했더니 이렇게 달에 도착할 수 있었어!”
        [26] fishlemon.webp
        레몬이 달에 도착하자마자, 
        굴비가 반갑게 달려왔습니다. 
        “레몬! 드디어 도착했구나!” 굴비는 활짝 웃으며 레몬을 맞이했어요. 

        레몬도 미소를 지으며 대답했습니다. 
        “응, 실패도 많았지만 결국엔 해냈어. 여기까지 오느라 정말 많은 로켓을 날렸지.”
        굴비가 고개를 끄덕이며 말했어요. 
        “그만큼 노력한 게 빛을 본 거야. 이제 우리 함께 달을 탐험하자!” 

        둘은 기쁜 마음으로 달의 아름다운 풍경을 함께 바라보며 새로운 모험을 준비하기 시작했습니다.
        
        [27] fox3.webp
        다른 친구들이 달에 도착했을때, 그 시각 여우도 발사준비를 모두 마친 상태였어요.
        [28] foxerror.webp
        그런데 여우의 첫 번째 발사에서, 예상치 못한 일이 벌어졌습니다. 
        로켓이 땅을 떠나기도 전에 엔진이 멈춰버린 것이었어요. 

        “이럴 리가 없는데…” 당황한 여우는 침착하게 문제를 점검하기 시작했습니다. 
        여우는 로켓의 부품들을 하나하나 살펴보며, 
        발사 시점에 부품이 제대로 맞물리지 않았다는 사실을 알아냈습니다. 
        “내가 다 확인했는데도 부품이 제대로 작동하지 않았군.” 
        [29] fox3.webp
        여우는 금방 그 부분을 고쳤지만 여전히 불안했습니다. 
        “조금만 더 확인해볼까..?“ 여우는 로켓의 흠을 찾아내며 
        발사를 계속 미루기만 했습니다.
        [30] lemonmoon.png
        그때 레몬이 달에서 조언을 해줬어요! 
        “완벽을 원할수록, 달이 점점 더 멀어져!! 일단 시도해봐아..!! ” 
        그 순간, 여우는 중요한 깨달음을 얻었습니다. 
        [31] fox3.webp
        “완벽할 필요는 없어! 
        일단 출발하자! 
        가면서 오류를 수정해도 괜찮을 거야!” 더 이상 고민하지 않기로 한 여우는, 
        과감하게 발사 버튼을 눌렀습니다
        [32] foxfly.webp
        “쿠
        구
        구궁!” 로켓은 순식간에 하늘로 치솟았고, 
        여우는 로켓의 핸들을 잡고 실시간으로 발생하는 작은 오차들을 바로잡으며 외쳤습니다. 
        “이야아아, 이게 되네! “ 
        로켓은 살짝 흔들리면서도 직선으로 달로 향해 날아갔어요 
        [33] foxmoon.webp
        달에 도착한 여우는 마침내 자신의 두 발로 달을 밟았습니다. 
        들뜬 마음으로 달 표면을 이리저리 뛰어다니며, 
        눈앞에 펼쳐진 경이로운 풍경에 감탄했죠. 
        
        “여기서 보이는 별들은 훨씬 더 밝고, 훨씬 가까이 보여!” 
        여우는 반짝이는 눈으로 혼잣말을 하며, 
        달의 신비로운 경치에 푹 빠져들었습니다.
        [34] fishmoon.png
        그때, 먼저 도착했던 굴비가 여우를 발견했습니다. 
        여우가 달 표면에서 뛰어다니는 모습을 보고 미소를 지으며 다가왔습니다. 
        “여우야, 여기서도 그렇게 바쁘게 돌아다니는구나?” 굴비가 말했습니다. 
        
        “잠시 앉아서 이 아름다운 풍경을 감상해보는 건 어때?” 
        굴비의 제안에 여우는 멈추고 잠시 생각했습니다. 
        
        [35] foxfish.jpeg
        “그래, 한번 앉아서 보는 것도 좋겠어.” 
        여우와 굴비는 달의 가장자리에 나란히 앉아 고요한 밤하늘을 바라보았습니다. 
        
        두 친구는 별들이 반짝이는 우주의 아름다움을 함께 감상하며, 
        그동안의 여정을 떠올렸습니다. “정말 아름답지 않아?” 굴비가 조용히 말했습니다. 
        [36] foxyawn.webp
        여우는 문득 고개를 돌리며 되물었어요. 
        '하ㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏ아ㅏㅏㅏㅏ ㅏㅏㅏㅏㅏㅏㅏ아ㅏㅏㅏㅏㅏㅏㅏㅏㅏ ㅏㅏㅏㅏㅏㅏㅏ아ㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏ암'
        그나저나 레몬은 어딨어?”
        
        굴비가 고개를 젓고는 웃으며 대답했습니다. 
        “어디겠니… 아마 지구 시간으로 이따 밤에 산책을 나올 거야. 여전히 자기 방식대로 시간을 보내고 있지.”
        [37] lemonmovie.webp
        한편 그 시각, 레몬은 휴대폰으로 공포 영화를 보며 도파민을 충전하고 있었습니다. 
        영화에 푹 빠져있던 레몬은 문득 시간이 꽤 지났다는 걸 깨닫았습니다.
        
        “이제는 조금 산책을 해볼까?” 레몬은 중얼거리며, 
        달의 넓은 표면을 천천히 걷기 시작했습니다.
        [38] lemonpic.webp
        길을 걷던 중, 
        레몬은 특이한 모양의 돌을 발견하고 사진을 찍으며 혼잣말을 했습니다. 

        “오, 특이한 모양이네. 여기 있는 돌들은 어떻게 만들어졌을까? 지구의 지각과 비슷할까?” 
        궁금증이 꼬리에 꼬리를 물었습니다. 
        
        [39] foxfish.jpeg
        그때 저 멀리, 여우와 굴비가 나란히 앉아 
        하늘을 바라보고 있는 모습을 발견한 레몬은 
        반가운 마음에 서둘러 걸음을 옮겼습니다. 
        [40] foxlemon.jpeg
        가까이 다가가며 레몬은 큰 소리로 외쳤습니다. 
        “여우! 너도 드디어 도착했구나!” 여우와 굴비는 깜짝 놀라 뒤를 돌아보았고,  
        레몬이 환한 미소로 다가오는 모습을 보고 기분 좋게 웃었습니다. 
        [41] nopotato.jpeg
        “이제 우리 왕좌왕이 모두 모였네!” 굴비가 환하게 웃으며 기쁨에 찬 목소리로 외쳤어요.
        “어우, 여우야 정말 고생 많았어.”
        레몬이 따뜻한 미소를 지으며 여우에게 말을 건넸죠. 
        
        “그러니까, 정말 수고했어!” 굴비도 여우에게 고개를 끄덕이던 순간,
        그 순간, 어디선가 희미한 목소리가 들려왔습니다. 
        마치 먼 곳에서 바람을 타고 전해지는 소리처럼, 
        누군가 부르는 듯한 낯익은 목소리였죠. 
        [42] theymethat.png
        “에헴.. 이 동화는 곧 끝나니까 좀만 버텨....”
        [43] nopotato.jpeg 
        “”… 감자 목소리가 들리는 것 같은데?” 
        자나깨나 '감자생각뿐인' 레몬이 감자를 떠올리며 의아한 표정으로 말했어요.
        
        “잘못 들었나… 에고고…” 
        레몬이 고개를 저으며 중얼거리자, 
        여우가 궁금한 듯 물었어요. 
        “왜?”
        
        그러자 레몬이 다시 물었죠. 
        “뭐?”
        
        여우도 똑같이 대답했어요. 
        “뭐?”
        
        굴비는 이 익숙한 상황에 미소를 지으며 말없이 웃었어요.
        [45] moon.webp
        여우, 굴비, 레몬은 모두 달에 도착했습니다. 
        각자의 방식으로 도착한 그들은 서로를 응원하며 달에서의 새로운 모험을 시작했습니다.

        비록 감자는 아직 도착하지 않았지만, 
        그들은 감자가 곧 올 것이라고 굳게 믿었습니다.
        
        [46] image3.jpeg
        달에서의 생활이 익숙해질 무렵, 
        친구들은 어느새 달의 아름다운 풍경을 함께 구경하는 것이 일상이 되었어요.
        달에서 바라보는 풍경은 정말 경이로웠답니다.  

        특히 달에서 보이는 지구는 친구들에게 지난 시간을 돌아보게하는 뿌듯함을 주었고, 
        지구에서 아직 출발하지 못한 이들을 자연스럽게 응원하게 만들었죠.
        
        “오!! 저기 로켓 발사에 성공했어!” 친구들이 환호하자, 
        굴비가 빠르게 덧붙였어요. “오, 빠른데~ 아마도 저건 himdeun 시스템일지도 몰라.”
        
        그때 여우가 눈을 가늘게 뜨며 말했어요. “엥, 근데 각도가 저게 맞아?” 
        
        “아, 다른 행성으로 가는거구나” 로켓들은 가끔씩 달을 그대로 스쳐 지나갔고, 
        친구들은 그 모습을 볼 때 마음 한편이 묘하게 흔들리기 시작했어요.
        
        “다른 사람들은 더 빨리, 더 멀리 가고 있구나…” 레몬이 작게 중얼거렸어요. 
        
        “맞아, 그들도 각자의 달을 향해 가고 있을 거야. 우리가 그랬던 것처럼 말이야. 
        하지만 중요한 건 우리도 해냈다는 거야. 
        우리는 
        우리 방식대로 성공해서 달에 도착했어.” 여우가 희망에 찬 목소리로 말했어요. 
        “감자가 오면 우리도 함께 더 멀리 모험을 떠나자!” 
        
        “뭐야 여우야 
        갑자기 왜 그래” 
        레몬이 걱정스러운 목소리로 물었어요 
        “몰라.. 그냥 그렇게 말해야 할 기분이 들었어..” 여우와 레몬이 의아해 하는 순간, 
        레몬의 핸드폰이 진동했어요
        [47] potato.webp
        레몬은 확인하며 외쳤어요 
        “엥, 감자한테 문자가 왔는데…?"" 
        
        'ㅎㅇ 나는 감자.. 
        나를 기다리고 있다면...
        이번엔 글렀어.. 
        교수가 졸업을 안 시켜준다,, 
        다음, 아니 다다음 행성에서 만나..' 라는데?”
        
        "....일단 우리 먼저 출발하자고" 
        적막을 깬 굴비의 말에 모두가 끄덕였어요
        [48] potatorocket.webp
        그 시각 지구에서 감자는 자신만의 속도로 로켓을 만들고 있었습니다. 
        
        “내 로켓은 튼튼하고 안전할 거야. 
        다다음 행성에 도착할 때까지 친구들이 나를 기다려주겠지.” 
        그렇게 감자는 자신만의 여정을, 새로운 모험을 준비하기 시작했습니다.
        
        [49] moon.webp
        그렇게 각자의 방식으로 만든 로켓 덕분에 달에 성공적으로 도착한 후 
        4명의 친구들은 다시 모험을 떠났습니다. 

        그들은 이제 달을 넘어 새로운 별들을 향해 더 멀리, 
        더 높이 날아갈 준비가 되어 있었습니다. 
        그들이 떠난 모험은 끝이 아니었죠. 
        오히려 새로운 시작이었습니다.
        
        [50] end.png
        
        The end
        다들 취업 축하해~!
        
        …The end?
        
        하.. 이 여정이 드디어 끝났다
        다들 정말 수고많았다~~~
        앞으로 더 큰 행성으로 나아가자구우우 
        우왕좌왕 화이팅!                   
        
        [51] chatgpt.png
        한 장면의 그림을 위해 감자는 챗지피티를 17번 돌렸다
        나는 날..과대평가해써... 이렇게 걸릴 줄 몰랐다 
        좀 징글징글했어...
        다들 이거 재밌었으면 좋겠다.

        즐거워야만 해. ㅇㅋ?
        아맞다 그리고 어제 제비뽑기한거 
        마지막 대사 누구할지 정한거였어 
        `;
        const jsonData = {
            "highlightedWord": [
                "허구",
                "이야아아",
                "'하ㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏ아ㅏㅏㅏㅏ ㅏㅏㅏㅏㅏㅏㅏ아ㅏㅏㅏㅏㅏㅏㅏㅏㅏ ㅏㅏㅏㅏㅏㅏㅏ아ㅏㅏㅏㅏㅏㅏㅏㅏㅏㅏ암'"
                ,
                "에헴.. 이 동화는 곧 끝나니까 좀만 버텨...."
            ],
            "main":
                [//[currentState.imageIndex][currentState.ScreenIndex][currentState.SentenceIndex]
                    [//그림0 (오프닝)
                        ["안녕하세요~"]
                        , ["이 동화은 만드는데 나름 공들였는데...입니다"]
                        , ["문제는 분량조절 실패함... 길고 긴 스토리임.. 마음의 준비 단단히 하쇼들"]
                        , ["선택지가 회색이라면 출력중인 상태이므로 버튼이 작동하지 않습니다"]
                        , ["tip: 이곳을 클릭시 글씨가 빨리 나옵니다.", " 주의: 이 작품에서 등장한 모든 이름, 인물, 사건들은 실존하는 인물과는 관련이 있지만 ", " 모두 감자의 상상력이 만들어낸 허구입니다"]
                    ]
                ],
            "imageInfo": ["pic/house.jpeg"]
        };
        //따봉지피티야 고마워~
        const sections = fullStory.split(/\[\d+\] /).filter(Boolean); // 빈 값 제거

        sections.forEach(section => {
            const imageInfo = [];
            // 첫 번째 줄은 이미지 정보, 나머지는 텍스트
            const lines = section.trim().split('\n');
            imageInfo.push("pic/" + lines[0]); // 첫 번째 줄을 이미지 정보로 사용
            const textLines = lines.slice(1); // 나머지 줄은 텍스트

            // 텍스트를 \n\n 기준으로 나눠 화면 단위로 분할
            const screenData = [];
            let screenBlock = [];

            textLines.forEach(line => {
                console.log(line);
                if (line.trim() === '') {
                    // 빈 줄을 만나면 화면 단위로 추가
                    if (screenBlock.length > 0) {
                        screenData.push(screenBlock);
                        screenBlock = [];
                    }
                } else {
                    screenBlock.push(line.trim());
                }
            });

            // 마지막 화면 단위 추가
            if (screenBlock.length > 0) {
                screenData.push(screenBlock);
            }
            jsonData.imageInfo.push(imageInfo);
            jsonData.main.push(screenData);
        });
        //console.log(JSON.stringify(jsonData, null, 2));
// 전체 단계 수 계산
function calculateTotalSteps() {
    let totalSteps = 0;
    storyStorage.forEach(screen => {
        screen.forEach(sentence => {
            totalSteps += sentence.length; // 각 문장의 길이를 더해서 전체 스텝 계산
        });
    });
    return totalSteps;
}

// 진행률 업데이트 함수
function updateProgress() {
    let currentStep = 0;

    // currentState까지의 진행 단계 계산
    for (let i = 0; i < currentState.imageIndex-2; i++) {
        storyStorage[i].forEach(sentence => {
            currentStep += sentence.length;
        });
    }

    // currentState imageIndex의 ScreenIndex까지 더함
    for (let i = 0; i < currentState.ScreenIndex; i++) {
        currentStep += storyStorage[currentState.imageIndex][i].length;
    }

    // currentState ScreenIndex에서 출력한 글자수까지 더함
    currentStep += currentState.charIndex;

    // 진행률 퍼센트 계산
    const totalSteps = calculateTotalSteps();
    const progressPercentage = (currentStep / totalSteps) * 100;
    
    // 진행률 텍스트 업데이트
    document.getElementById('progress-text').textContent = `${Math.round(progressPercentage)}%`;
}



        const frame = document.getElementById('pic')
        const textContainer = document.getElementById('text-container');
        const choice = document.querySelectorAll('.choice')

        let delayBetweenChars = 80; // 한 글자씩 출력하는 간격 (밀리초)
        let delayBetweenSentences = 600; // 문장 간의 딜레이 (밀리초)
        let repeatcount = 0;
        let highlightcount = 0;
        isProcessing = false;
        onechar = [];

        //저장데이터를 받아옴
        const highlightedWord = jsonData.highlightedWord;
        const storyStorage = jsonData.main;
        const images = jsonData.imageInfo;
        //plushighlight[0][]
        //console.log(storyStorage[0][0][0]);
        //main1, main2,choice,oppen,close->main으로 통일
        choice.forEach((ele, num) => {
            //console.log(ele, num)
            ele.addEventListener('click', function () {
                if (isProcessing) {
                    return; // 이벤트 중복 방지
                }
                isProcessing = true; // 처리 중임을 표시
                ele.style.backgroundColor = "gray";
                choiceclick(num);
            })
        });
        //textContainer클릭시: 
        textContainer.addEventListener('click', () => textclick());

        function textclick() {
            if (isProcessing) {//진행중일때만 빨라지게
                delayBetweenChars = 30; // 한 글자씩 출력하는 간격 (밀리초)
                delayBetweenSentences = 200; // 문장 간의 딜레이 (밀리초)
            }
        }
        function fixnum(num) {
            /* 경우의수
            1.제일 처음의경우
            2.1를 제외한 경우에는 currentState 장면의 번호가 아니라 그 다음의 경우의 번호가 전달된다(다음을 눌렀을때 출력되야할)
         */
            if (num === 0) {//다음버튼을 클릭함
                currentState.ScreenIndex++;
                if (currentState.ScreenIndex >= storyStorage[currentState.imageIndex].length) {
                    //다음currentState.imageIndex로 넘어가기
                    currentState.ScreenIndex = 0;
                    currentState.imageIndex++;
                    if (currentState.imageIndex === storyStorage.length) {
                        window.alert("진짜 끝임~~~ ㅂㅂ");
                        currentState.imageIndex = 0;
                        highlightcount = 0;
                        //처음으로 돌아가자
                    }
                }
            }

            if (num === 1) {//이전버튼을 클릭함
                if (currentState.ScreenIndex == 0 && currentState.imageIndex == 0) {
                    //첫장인경우
                    ++repeatcount;
                    if (repeatcount > 2) {
                        window.alert("장난치지마 이거 부실함")
                    }
                }
                else if (currentState.ScreenIndex == 0) {
                    --currentState.imageIndex;
                    currentState.ScreenIndex = storyStorage[currentState.imageIndex].length - 1;
                }
                else {
                    --currentState.ScreenIndex;
                }
            }
        }
        function choiceclick(choicenum) {
            //버튼에 따라 단위들을 수정한다.
            fixnum(choicenum);
            // 이전 텍스트를 모두 지웁니다.
            textContainer.innerHTML = '';
            //SentenceIndex, charIndex 초기화
            currentState.SentenceIndex = 0;
            currentState.charIndex = 0;
            choice[0].textContent = "다음 ";
            choice[1].textContent = "이전 ";
            //사진을 교체합니다
            frame.src = `${images[currentState.imageIndex]}`;
            //출력
            updateProgress();
            displaying();
        }

        let currentState = {
            imageIndex: 0,   // currentState 표시 중인 문단의 인덱스
            ScreenIndex: 0,   // currentState 표시 중인 문장의 인덱스
            SentenceIndex: 0,   // 문장의 인덱스
            charIndex: 0, // currentState 출력된 글자 수
            sentence: ""   // currentState 출력 중인 문장
            //지피티가 객체로 묶으라고 충고해줌.. 따봉...
        };

        function displaying() {
            //화면을 한번에 출력시키는 기능..
            //아 이거 너무 메서드가 연결되어있는데 수정 못하나
            currentState.sentence = storyStorage[currentState.imageIndex][currentState.ScreenIndex][currentState.SentenceIndex];
            if (currentState.charIndex < currentState.sentence.length) {
                //한문장에서 다음 글자가 남았다
                setTimeout(() => {
                    onechar[currentState.charIndex] = document.createElement('span');
                    onechar[currentState.charIndex].textContent = currentState.sentence.charAt(currentState.charIndex);
                    if (currentState.sentence.includes(highlightedWord[highlightcount])) {
                        //강조할어구가 있다면 onchar[currentState.charIndex]에 클래스부여
                        console.log(highlightcount)
                        highlighting(onechar)
                    }
                    //한글자출력
                    textContainer.appendChild(onechar[currentState.charIndex]);
                    ++currentState.charIndex;
                    //다음글자 출력
                    displaying();
                }, delayBetweenChars);
            } else {
                //한 문장의 끝에 도달
                currentState.charIndex = 0;
                currentState.SentenceIndex++;
                if (currentState.SentenceIndex < storyStorage[currentState.imageIndex][currentState.ScreenIndex].length) {
                    //다음 문장있다
                    setTimeout(() => {//문장 간의 딜레이 후 
                        //문장사이 빈칸추가
                        textContainer.appendChild(document.createTextNode("  "));
                        //재호출
                        displaying();
                    }, delayBetweenSentences);
                } else {
                    //다출력함
                    finishprintall()
                }
            }
        }
        function highlighting(onechar) {
            const currentWord = highlightedWord[highlightcount]; // currentState 하이라이트할 단어
            const startIndex = currentState.sentence.indexOf(currentWord); // 하이라이트할 단어가 시작되는 인덱스

            // currentState 출력한 글자가 하이라이트할 단어의 마지막 글자 위치인지 확인
            if (startIndex !== -1 && currentState.charIndex >= startIndex && currentState.charIndex < startIndex + currentWord.length) {
                if (highlightcount === 0) {
                    onechar[currentState.charIndex].classList.add('highlight'); // 하이라이트 클래스 추가
                }
                else if (highlightcount <3) {
                    onechar[currentState.charIndex].classList.add('foxsay');
                }
                else { onechar[currentState.charIndex].classList.add('lowlight'); }
            }

            // 하이라이트 단어가 모두 출력되면 다음 단어로 넘어감
            if (currentState.charIndex === startIndex + currentWord.length - 1) {
                highlightcount++; // 다음 하이라이트 단어로 넘어가기
            }
        }
        function finishprintall() {
            //버튼누를수있게하고 버튼색깔 돌아와
            isProcessing = false;
            choice[0].style.backgroundColor = "";
            choice[1].style.backgroundColor = "";
            //속도초기화
            delayBetweenChars = 70; // 한 글자씩 출력하는 간격 (밀리초)
            delayBetweenSentences = 530; // 문장 간의 딜레이 (밀리초)
        }

    </script>
</body>

</html>
